<assembly>

    <id>px-submission-tool-deployment</id>

    <formats>
        <format>zip</format>
    </formats>

    <includeBaseDirectory>false</includeBaseDirectory>

    <fileSets>
        <!-- Include the fat JAR as the main application JAR -->
        <fileSet>
            <directory>${project.basedir}/target</directory>
            <includes>
                <include>*-fat.jar</include>
                <include>px-submission-tool.jar</include>
            </includes>
            <outputDirectory>${assembly.dir}</outputDirectory>
            <fileMode>0644</fileMode>
        </fileSet>
        
        <!-- Include launcher scripts -->
        <fileSet>
            <directory>src/main/resources/launchers</directory>
            <outputDirectory>${assembly.dir}</outputDirectory>
            <fileMode>0755</fileMode>
        </fileSet>
        
        <!-- Include launchers in root folder with version filtering -->
        <fileSet>
            <directory>.</directory>
            <includes>
                <include>start.bat</include>
                <include>start.sh</include>
            </includes>
            <outputDirectory>${assembly.dir}</outputDirectory>
            <fileMode>0755</fileMode>
            <filtered>true</filtered>
        </fileSet>
        
        <!-- Include the main JAR file -->
        <fileSet>
            <directory>target</directory>
            <includes>
                <include>px-submission-tool-${project.version}.jar</include>
            </includes>
            <outputDirectory>${assembly.dir}</outputDirectory>
            <fileMode>0644</fileMode>
        </fileSet>
        
        <!-- Include essential directories -->
        <fileSet>
            <directory>${project.basedir}</directory>
            <includes>
                <include>help/**</include>
                <include>readme/**</include>
                <include>config/**</include>
            </includes>
            <outputDirectory>${assembly.dir}</outputDirectory>
            <fileMode>0644</fileMode>
        </fileSet>
        
        <!-- Include Aspera files with executable permissions for the binary -->
        <fileSet>
            <directory>${project.basedir}</directory>
            <includes>
                <include>aspera/**</include>
            </includes>
            <outputDirectory>${assembly.dir}</outputDirectory>
            <fileMode>0755</fileMode>
        </fileSet>
        
        <!-- JRE directories are now downloaded on-demand by launcher scripts -->
        
        <!-- Include README -->
        <fileSet>
            <directory>${project.basedir}</directory>
            <includes>
                <include>README.md</include>
            </includes>
            <outputDirectory>${assembly.dir}</outputDirectory>
            <fileMode>0644</fileMode>
        </fileSet>
    </fileSets>
</assembly>